<div class="task-wrapper">
    <div class="header">
        <h2>Task Manager</h2>
        <div class="subtitle">Stay organized and productive</div>
    </div>

    <div class="content">
        <!-- Add Task Section -->
        <div class="input-section">
            <div class="input-row">
                <input matInput placeholder="What needs to be done?" [(ngModel)]="taskTitle" (keyup.enter)="addTask()"
                    class="task-input" />
                <button class="add-button" (click)="addTask()">
                    <span class="material-icons"></span>
                    Add
                </button>
            </div>
        </div>

        <div class="task-stats">
            <div class="stat-item">
                <span class="stat-number">{{ tasks.length }}</span>
                <span class="stat-label">TOTAL</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ completedCount }}</span>
                <span class="stat-label">COMPLETED</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ pendingCount }}</span>
                <span class="stat-label">PENDING</span>
            </div>
        </div>

        <div class="filter-buttons">
            <button mat-button (click)="filter = 'all'" [color]="filter === 'all' ? 'accent' : undefined">All</button>
            <button mat-button (click)="filter = 'completed'"
                [color]="filter === 'completed' ? 'accent' : undefined">Completed</button>
            <button mat-button (click)="filter = 'incomplete'"
                [color]="filter === 'incomplete' ? 'accent' : undefined">Incomplete</button>
        </div>

        <mat-list *ngIf="filteredTasks.length; else noTasks">
            <mat-list-item *ngFor="let task of filteredTasks">
                <input type="checkbox" [checked]="task.isCompleted" (change)="toggleComplete(task)" />
                <span class="task-title" [ngClass]="{ done: task.isCompleted }" contenteditable
                    (blur)="updateLocalStorage()">
                    {{ task.title }}
                </span>

                <span class="date">{{ task.createdAt | date:'short' }}</span>

                <button mat-icon-button color="warn" (click)="deleteTask(task.id)">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-list-item>
        </mat-list>

        <ng-template #noTasks>
            <p class="empty">No tasks to show</p>
        </ng-template>
    </div>