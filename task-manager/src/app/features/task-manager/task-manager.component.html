<div class="task-wrapper mat-elevation-z4">
    <h2>Task Manager</h2>

    <div class="input-row">
        <mat-form-field class="full-width" appearance="fill">
            <mat-label>New Task</mat-label>
            <input matInput [(ngModel)]="taskTitle" (keyup.enter)="addTask" />
        </mat-form-field>

        <button mat-flat-button color="primary" (click)="addTask()">Add</button>
    </div>

    // Filtering buttons allow toggling between All / Completed / Incomplete
    <div class="filter-buttons">
        <button mat-button (click)="filter = 'all'" [color]="filter === 'all' ? 'accent' : ''">All</button>
        <button mat-button (click)="filter = 'completed'"
            [color]="filter === 'completed' ? 'accent' : ''">Completed</button>
        <button mat-button (click)="filter = 'incomplete'"
            [color]="filter === 'incomplete' ? 'accent' : ''">Incomplete</button>
    </div>

    <mat-list *ngIf="filteredTasks.length; else noTasks">
        <mat-list-item *ngFor="let task of filteredTasks">
            <mat-checkbox [(ngModel)]="task.isCompleted" (change)="toggleComplete(task)">
            </mat-checkbox>

            // Allows you to edit task tiles directly
            <span class="task-title" [ngClass]="{ done: task.isCompleted }" contenteditable
                (blur)="updateLocalStorage()">
                {{ task.title }}
            </span>

            <span class="date">{{ task.createdAt | date:'short' }}</span>

            <button mat-icon-button color="warn" (click)="deleteTask(task.id)">
                <mat-icon>delete</mat-icon>
            </button>
        </mat-list-item>
    </mat-list>

    <ng-template #noTasks>
        <p class="empty">No tasks to show</p>
    </ng-template>
</div>